<style>
canvas{
  background-color: pink;
  padding-left: 0;
  padding-right: 0;
  margin-left: auto;
  margin-right: auto;
  display: block;
  border:1px solid #000000;
  /*width: 700px;*/
}
</style>
<canvas id="myCanvas" width="700" height="600"></canvas>
<script src ="jquery.min.js"></script>
<script>
//VARIABLES VARIABLES VARIABLES VARIABLES VARIABLES VARIABLES VARIABLES
  var ctx         = document.getElementById("myCanvas").getContext("2d");
  ctx.font        = "30px Arial";
  var HEIGHT      = 600;
  var WIDTH       = 700;
  var frameCount  = 0;
  var score       = 0;
  //different speeds
  var spdY_slow   = 9
  var spdY_medium = 15
  var spdY_fast   = 20
  //empty list of zombies
  var zombieList  = {};
  //create scoreboard
  var scoreBoard  = [0,0,0,0,0,0];
  var highscores = scoreBoard.sort(function(a, b){return b-a});
  // game behin, flag setter


//*** Create ZOMBIE objects usine Zombie(id,x,y,spdY,width,height,color)
  Zombie("Z1", 100, -50,spdY_slow,30,30,"grey")
  Zombie("Z2", 200, -50,spdY_slow,20,20,"grey")
  Zombie("Z3", 300, -50,spdY_slow,40,40,"grey")
  Zombie("Z4", 400, -50,spdY_slow,30,30,"grey")
  Zombie("Z5", 500, -50,spdY_slow,30,30,"grey")
  Zombie("Z6", 600, -50,spdY_slow,30,30,"grey")
//Create Zombies for each row -find a way to give it a proper/better ID
generateZombies = function(){
  Zombie(Math.random(), 100, -50,spdY_slow,30,30,"grey");
  Zombie(Math.random(), 200, -50,spdY_slow,20,20,"grey");
  Zombie(Math.random(), 300, -50,spdY_slow,40,40,"grey");
  Zombie(Math.random(), 400, -50,spdY_slow,30,30,"grey");
  Zombie(Math.random(), 500, -50,spdY_slow,30,30,"grey");
  Zombie(Math.random(), 600, -50,spdY_slow,30,30,"grey");
}
//Player Object
var player = {
  x: 350,
  y: 550,
  name:"P",
  lives:"2",
  width:20,
  height:20,
  color: "white"
};
var cursor = {
  x:0,
  y:0,
};
//get mouse position, including discrepancy between the screen and canvas
document.onmousemove = function(mouse){
  var mouseX = mouse.clientX-document.getElementById("myCanvas").getBoundingClientRect().left;
  var mouseY = mouse.clientY- document.getElementById("myCanvas").getBoundingClientRect().top;
  if (mouseX < (player.width/2)){
    mouseX = (player.width/2)
  };
  if (mouseX > WIDTH-(player.width/2)){
    mouseX = WIDTH-(player.width/2)
  };
  if (mouseY < (player.height/2)){
    mouseY = (player.height/2)
  };
  if (mouseY > HEIGHT-(player.height/2)){
    mouseY = HEIGHT-(player.height/2)
  };

  player.x = mouseX;
  cursorX = mouseX;
  player.y = mouseY;
  cursorY = mouseY;
}
//function to create objects of zombies and push into list
function Zombie(id,x,y,spdY,width,height,color){
  var zombie = {
    x:x,
    y:y,
    spdY:spdY,
    name:"Z",
    id:id,
    width:width,
    height:height,
    color:color,
  }
  zombieList[id] = zombie;
}
//TRUE OR FALSE? calculating the collision between two rectangles, inputs are player, zombieList[key] *** keep in mind the rectangle width/height! its point is at the center of the square.
testCollision = function (yay1,yay2){
    var rect1 = {
    x: yay1.x-((yay1.width)/2),
    y: yay1.y-((yay1.height)/2),
    width: yay1.width,
    height: yay1.height,
    };
    var rect2 = {
    x:yay2.x-((yay2.width)/2),
    y: yay2.y-((yay2.height)/2),
    width:yay2.width,
    height:yay2.height,
    };
    return collisionRect(rect1,rect2);
}
//collision function for rectangles
collisionRect= function(rect1,rect2){
   return (rect1.x < rect2.x + rect2.width &&
   rect1.x + rect1.width > rect2.x &&
   rect1.y < rect2.y + rect2.height &&
   rect1.height + rect1.y > rect2.y);
}

//function to draw rectangles
draw_something = function(something){
  ctx.save(); // make sure to save so that we can revert the color back to normal
  ctx.fillStyle = something.color;
  ctx.fillRect(something.x-((something.width)/2), something.y-((something.height)/2),something.width,something.height); // dimensions of rectangle
  ctx.restore(); // restore ctx to original settings
}
// functions for zombies
update_z = function(something){
  update_z_position(something);
  draw_something(something);
}
//function to update position
update_z_position = function (something) {
  something.y += something.spdY;
}
gameEnd = function(){
  clearInterval(Interval);
  scoreBoard.push(score);
  highscores=highscores.sort(function(a, b){return b-a});
  console.log(highscores);
  console.log("YOU HAVE DIED! You have a score of "+ score +"!")
  // ctx.clearRect(document.getElementById("myCanvas").getBoundingClientRect().left, document.getElementById("myCanvas").getBoundingClientRect().top,700,600);
  }
gameInit = function(){ // initiate game
  Interval = setInterval(update, 30); // SET INTERVAL
  function update(){
    ctx.clearRect(0,0,WIDTH,HEIGHT);
    frameCount++;
    if (frameCount%30===0){
      generateZombies();
    };
    if (frameCount%15===0){
      score ++;
    };
    for (var key in zombieList){
      update_z(zombieList[key]);
      var isColliding = testCollision(player,zombieList[key]);
      if (isColliding) {
        console.log('BITTEN!');
        delete zombieList[key];
        player.lives = player.lives - 1;
        break;
      };
      if (zombieList[key].y>700){
        delete zombieList[key];
      };
    };

    if (player.lives <= 0){
      gameEnd();
    };
    draw_something(player);
    ctx.fillText(("Player Life: " + player.lives),500,550);
    ctx.fillText(("Score: " + score),500,500);
  }
}
gameInit();

// // instructionsBox = function ()

// drawInstructionsBox = function(){
//     ctx.save(); // make sure to save so that we can revert the color back to normal
//     ctx.fillStyle = "green";
//     ctx.fillRect(200,150,300,300);; // dimensions of rectangle
//     ctx.restore(); // restore ctx to original settings
//   }
// drawIntructions = function(){
//     ctx.save();
//     ctx.font = "30px Arial";
//     ctx.fillText("INSTRUCTIONS",239,200);
//     ctx.font="20px Arial";
//     ctx.fillText("Do not collide with Zombies",220,250);
//     ctx.fillText("or you will slowly become one!",215,270);
//     ctx.fillText("Capture pills to increase your",215,320);
//     ctx.fillText("immune against Zombies!",225,340);
//     ctx.restore();
//   }

// var playButton = {
//   x: 300,
//   y: 375,
//   width:100,
//   height:40,
//   color: "yellow",
// }
// PlayButton = function(){
//   ctx.save(); // make sure to save so that we can revert the color back to normal
//   ctx.fillStyle = playButton.color;
//   ctx.fillRect(playButton.x,playButton.y,playButton.width,playButton.height);
//   ctx.restore();
//   ctx.save();
//   ctx.font = "20px Arial";
//   ctx.fillText("PLAY",326,403);
//   ctx.restore();
//   }
// instructionsBox = function(){
//   drawInstructionsBox();
//   drawIntructions();
//   PlayButton();
//   }

// clickPlay = function(){
//   $('canvas').on('click', function(e){
//     console.log("Player clicked on a cell");
//     checkIfInsidePlayButton(cursorX,cursorY);
//     console.log(gameBeginsFlag);
//     console.log(cursorX+" "+cursorY);
//     if (gameBeginsFlag === true){
//       console.log("game begins");
//       ctx.clearRect(document.getElementById("myCanvas").getBoundingClientRect().left, document.getElementById("myCanvas").getBoundingClientRect().top,700,600);
//     }
//   });
// };

// function checkIfInsidePlayButton(something1,something2){
//   if(((something1>300)&&(something1<400))&&((something2>375)&&(something2<415))){
//     gameBeginsFlag = true;
//     return true;
//   } else {
//     gameBeginsFlag = false;
//     return false;
//   }
// }

// startGame = function(){
//   clickPlay();
//   };

// drawScoreBoardBox = function(){
//     ctx.save(); // make sure to save so that we can revert the color back to normal
//     ctx.fillStyle = "green";
//     ctx.fillRect(200,150,300,300);; // dimensions of rectangle
//     ctx.restore(); // restore ctx to original settings
//   }
// drawScoreBoard = function(){
//     ctx.save();
//     ctx.font = "30px Arial";
//     ctx.fillText("Your are infected!",230,200);
//     ctx.fillText("HIGH-SCORES",239,250);
//     ctx.font="20px Arial";
//     ctx.fillText((highscores[0]),239,300);
//     ctx.fillText(highscores[1],239,320);
//     ctx.fillText(highscores[2],239,340);
//     // ctx.fillText(highscore[3],225,340);
//     ctx.restore();
//   }

// // var getText = document.getElementById("inputText").value;
// // ctx.fillText("i" + getText,10,50);

// var doneButton = {
//   x: 300,
//   y: 375,
//   width:100,
//   height:40,
//   color: "yellow",
// }

// DoneButton = function(){
//   ctx.save(); // make sure to save so that we can revert the color back to normal
//   ctx.fillStyle = doneButton.color;
//   ctx.fillRect(doneButton.x,doneButton.y,doneButton.width,doneButton.height);
//   ctx.restore();
//   ctx.save();
//   ctx.font = "20px Arial";
//   ctx.fillText("DONE",323,403);
//   ctx.restore();
//   }

// ScoreBoardBox = function(){
//   drawScoreBoardBox();
//   drawScoreBoard();
//   DoneButton();
//   clickDone();
// }
// clickDone = function(){
//   $('canvas').on('click', function(e){
//     console.log("Player clicked on a cell");
//     checkIfInsideDoneButton(cursorX,cursorY);
//     console.log(gameRestartFlag);
//     console.log(cursorX+" "+cursorY);
//     if (gameRestartFlag === true){
//       console.log("game restarts");

//     }
//   });
// };
// function checkIfInsideDoneButton(something1,something2){
//   if(((something1>300)&&(something1<400))&&((something2>375)&&(something2<415))){
//     gameRestartFlag = true;
//     return true;
//   } else {
//     gameBeginsFlag = false;
//     return false;
//   }
// }



// instructionsBox();
// startGame();
// gameInit();

</script>

